# brain_explore Configuration
# Copy this to .env and fill in your values

# ============================================================================
# Neo4j (Graph Database)
# ============================================================================
# Default: docker compose runs Neo4j at localhost:7687
IES_NEO4J_HOST=localhost
IES_NEO4J_PORT=7687
IES_NEO4J_USER=neo4j
IES_NEO4J_PASSWORD=brainexplore

# ============================================================================
# Claude API (Entity Extraction & Chat)
# ============================================================================
# Get key from: https://console.anthropic.com/
# Required for session chat and entity extraction
ANTHROPIC_API_KEY=sk-ant-...

# Optional: Override default API key for IES specifically
# IES_ANTHROPIC_API_KEY=sk-ant-...

# ============================================================================
# OpenAI API (Embeddings for Literature Linking)
# ============================================================================
# Get key from: https://platform.openai.com/account/api-keys
# Required for linking entities to source materials (Qdrant search)
OPENAI_API_KEY=sk-...

# ============================================================================
# SiYuan Integration
# ============================================================================
# SiYuan server location
IES_SIYUAN_HOST=localhost
IES_SIYUAN_PORT=6806

# SiYuan authentication token
# Find in: SiYuan settings → About → API Token
IES_SIYUAN_TOKEN=4we79so0hs4dmtlm

# Default notebook for IES to create documents in
# Current: Intelligent Exploration System notebook
IES_SIYUAN_DEFAULT_NOTEBOOK=20251201113102-ctr4bco

# ============================================================================
# IES Backend Service
# ============================================================================
# Server binding
IES_BACKEND_HOST=0.0.0.0
IES_BACKEND_PORT=8081

# ============================================================================
# User & Domain Configuration (Framework Layer)
# ============================================================================
# User identifier (used in API routes, Neo4j storage)
IES_USER_ID=chris

# Domain/implementation type (currently: therapy)
# Future: will support other domains when generalization complete
IES_DOMAIN=therapy

# ============================================================================
# Feature Flags & Settings
# ============================================================================
# Streaming responses (currently false for iOS compatibility)
IES_ENABLE_STREAMING=false

# Literature linking threshold (0.0 - 1.0)
# Higher = stricter matching, fewer false positives
# Current: 0.45 (found to be good for therapy books)
IES_LITERATURE_LINKING_THRESHOLD=0.45

# ============================================================================
# Notes
# ============================================================================
#
# Required Variables (must be set):
#   - ANTHROPIC_API_KEY
#   - OPENAI_API_KEY
#   - IES_SIYUAN_TOKEN
#
# Optional Variables (have sensible defaults):
#   - Most others have defaults for local development
#
# To use defaults:
#   docker compose up -d           # Start Neo4j + Qdrant
#   cp .env.example .env
#   # Edit .env with your API keys only
#   cd ies/backend && uv run uvicorn ies_backend.main:app --host 0.0.0.0 --port 8081
#

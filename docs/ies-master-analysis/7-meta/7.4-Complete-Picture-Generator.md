# 7.4 Complete Picture Generator

**Purpose:** A prompt template that enables any AI agent to rapidly understand the complete IES system
**Target Audience:** AI agents, new developers, external collaborators
**Time to Comprehension:** <30 minutes with this prompt
**Last Updated:** December 6, 2025

---

## How to Use This Prompt

**For AI Agents:**
Copy the prompt below into your context. Follow the reading order and analysis tasks. The prompt is designed to build understanding incrementally.

**For Humans:**
Use this as an onboarding checklist. Read documents in the specified order. Answer the questions to verify understanding.

**For Code Review:**
Use the analysis tasks to evaluate whether new code aligns with IES principles.

---

## The Prompt

```markdown
# IES System Analysis Prompt

You are analyzing the **Intelligent Exploration System (IES)**, an ADHD-friendly personal knowledge management system that enables thinking partnership between humans and AI across any knowledge domain.

## Reading Order (30-45 minutes)

Read these documents in order to build understanding from foundation → implementation:

### Phase 1: Foundation (10 minutes)

**System Overview:**
- `docs/ies-master-analysis/0-system/0.1-IES-Overview.md`
  - Mission and purpose
  - Target user cognitive profile
  - The knowledge lifecycle (ephemeral → synthesis)
  - Three modes: Capture, Dialogue, Flow
  - Four-layer architecture

- `docs/ies-master-analysis/0-system/0.2-Glossary.md`
  - Key terminology (seed, spark, breadcrumb, journey, etc.)
  - Entity types (domain vs. personal)
  - Status systems (capture_status vs. user_status)

**Quick Check:**
- Can you explain the mission in one sentence?
- What makes IES "ADHD-friendly"?
- What are the three interlocking modes?

### Phase 2: Cognitive Model (8 minutes)

**User Cognition:**
- `docs/ies-master-analysis/1-cognition/1.1-Cognitive-Profile.md`
  - 6-dimension profile system
  - How profiles adapt from observation
  - Profile → question mapping

- `docs/ies-master-analysis/1-cognition/1.2-Entry-Point-Theory.md`
  - Multiple entry points (mood, energy, question, resonance)
  - Why ADHD users need this
  - Entry point → mode routing

- `docs/ies-master-analysis/1-cognition/1.3-Guided-Thinking-Patterns.md`
  - 9 question classes (Schema-Probe, Boundary, Causal, etc.)
  - How questions guide cognition
  - Question class → thinking outcome

**Quick Check:**
- What are the 6 cognitive dimensions?
- Why are there 9 question classes instead of generic prompts?
- How does IES use energy levels?

### Phase 3: Operational Modes (10 minutes)

**The Three Modes:**
- `docs/ies-master-analysis/2-modes/2.1-Capture-Spec.md`
  - Quick Capture system
  - Status lifecycle (raw → classified → processed)
  - Zero-friction design

- `docs/ies-master-analysis/2-modes/2.2-Dialogue-Spec.md`
  - 5 thinking modes (Learning, Articulating, Planning, Ideating, Reflecting)
  - ForgeMode interface
  - Session → entity extraction

- `docs/ies-master-analysis/2-modes/2.3-Flow-Spec.md`
  - Graph exploration interface
  - Journey breadcrumbs
  - Thinking partner questions during flow

- `docs/ies-master-analysis/2-modes/2.4-Mode-Transition-Engine.md`
  - How modes interlock
  - Transition triggers
  - The virtuous cycle

**Quick Check:**
- What's the difference between capture_status and user_status?
- Which mode would you use to understand a new mechanism?
- How do journey breadcrumbs support reflection?

### Phase 4: Data Structures (8 minutes)

**Schemas:**
- `docs/ies-master-analysis/3-schemas/3.1-Seed-Schema.md`
  - 7 idea types
  - Dual status systems
  - SeedBlockMeta interface

- `docs/ies-master-analysis/3-schemas/3.2-Block-Schema.md`
  - 6 block types (seed, shaping, map, concept, decision, log_entry)
  - Block metadata standards
  - TypeScript and Python equivalents

- `docs/ies-master-analysis/3-schemas/3.3-Notebook-Schema.md`
  - 9-folder SiYuan structure
  - Frontmatter standards
  - Backend linking (be_id, be_type)

- `docs/ies-master-analysis/3-schemas/3.4-Entity-Graph-Schema.md`
  - Domain graph (concepts, frameworks, theories)
  - Personal graph (sparks, insights, threads)
  - Relationship types

**Quick Check:**
- What are the 7 seed/idea types?
- What's the difference between `/Seedlings/Insights/` and `/Insights/`?
- Which fields link SiYuan blocks to backend entities?

### Phase 5: Implementation (10 minutes)

**Architecture:**
- `docs/ies-master-analysis/4-architecture/4.1-SiYuan-Structure.md`
  - 9-folder hierarchy
  - Plugin components (Dashboard, ForgeMode, FlowMode, QuickCapture)
  - Document lifecycle

- `docs/ies-master-analysis/4-architecture/4.2-Backend-Pipeline.md`
  - FastAPI services
  - Knowledge graph (Neo4j + Qdrant)
  - Calibre integration (single source of truth)

- `docs/ies-master-analysis/4-architecture/4.3-Agent-Architecture.md`
  - AI agent design
  - Question generation
  - Entity extraction

- `docs/ies-master-analysis/4-architecture/4.4-APIs-MCP-Integration.md`
  - 8 API routers
  - MCP integration (future)
  - Cross-app communication

**Quick Check:**
- What are the 4 architectural layers?
- Where is the single source of truth for books?
- How does SiYuan plugin communicate with backend?

### Phase 6: Visual Reference (5 minutes)

**Diagrams:**
- `docs/ies-master-analysis/5-visuals/5.1-Graph-Visualizations.md`
  - Knowledge graph structure
  - Entity relationship diagrams

- `docs/ies-master-analysis/5-visuals/5.2-Project-AST-Maps.md`
  - Mode transition diagrams
  - Data flow visualizations

- `docs/ies-master-analysis/5-visuals/5.3-Flow-Mode-UI.md`
  - UI screenshots and wireframes
  - User interaction flows

**Quick Check:**
- Can you sketch the 4-layer architecture from memory?
- Can you draw the virtuous cycle?

---

## Analysis Tasks

After reading these documents, you should be able to:

### Task 1: Explain IES Mission (1 paragraph)

Write a clear explanation of what IES does and why it matters.

**Your answer should include:**
- Target users (ADHD-friendly design)
- Core problem solved (non-linear knowledge navigation)
- Key differentiator (thinking partnership, not chatbot)
- The virtuous cycle

### Task 2: List ADHD Cognitive Assumptions (6 items)

What are the 6 core assumptions about ADHD cognition that drive IES design?

**Expected:**
1. Interest-based nervous system
2. Context-dependent retrieval
3. Multiple entry points needed
4. Low-friction capture essential
5. Visible progress important
6. Non-judgmental lifecycle (growth metaphor)

### Task 3: Describe the 3 Modes and Their Interactions

For each mode (Capture, Dialogue, Flow), explain:
- Purpose
- User entry point
- AI role
- Output
- How it feeds the next mode

**Expected:**
- Capture → sparks → Dialogue
- Dialogue → concepts → Graph
- Graph → Flow exploration → insights
- Insights → new captures (cycle continues)

### Task 4: Identify the 9 Question Classes

List the 9 question classes and their cognitive functions.

**Expected:**
1. Schema-Probe — Reveal hidden structure
2. Boundary — Clarify edges and limits
3. Dimensional — Introduce spectra
4. Causal — Explore mechanisms
5. Counterfactual — What-if explorations
6. Anchor — Ground in concrete instances
7. Perspective-Shift — Change viewpoint
8. Meta-Cognitive — Examine thinking patterns
9. Reflective-Synthesis — Integrate insights

### Task 5: Trace Data Flow from Capture to Graph

Describe the complete journey of an idea from initial capture to formalized concept in knowledge graph.

**Expected Flow:**
1. User captures thought → CaptureItem (`raw`)
2. AI extracts entities → `classified`
3. User processes in Quick Capture → moved to Seedling folder (`processed`)
4. User explores seed in Dialogue mode → ThinkingSession created
5. Session extracts concepts → Neo4j nodes created
6. Concepts available for Flow exploration
7. Flow generates insights → new captures (cycle restarts)

### Task 6: Note Implementation Gaps

From reading `docs/ies-master-analysis/6-audits/6.1-Feature-Audit-Checklist.md`:

**List items that are:**
- ✅ Fully implemented
- ⚠️ Partially implemented
- ❌ Designed but not built

**Example:**
- ✅ Entity overlay in Readest
- ⚠️ Cross-app state sync (designed, not implemented)
- ❌ Voice capture (parking lot)

---

## Questions to Answer

Use these questions to test your understanding:

### System Architecture

1. **What makes IES different from Notion, Obsidian, or Roam?**
   - Expected: Graph-based concept navigation, ADHD-friendly capture, personalized thinking partner, emergent insights from structure

2. **Why four layers instead of three?**
   - Expected: Layer 4 (Readest) added for reading interface; exploration while reading source materials

3. **What's the role of Calibre in the architecture?**
   - Expected: Single source of truth for book catalog; `calibre_id` as universal identifier

### Cognitive Design

4. **How does the Question Engine personalize thinking?**
   - Expected: 6-dimension cognitive profile → question class selection → adaptive dialogue

5. **What is the Mode Transition Engine?**
   - Expected: Automatic switching between Capture/Dialogue/Flow based on user state, interaction cadence, and resonance signals

6. **Why are there two status fields (capture_status and user_status)?**
   - Expected: Separate AI processing state from user engagement state; AI can classify without affecting user lifecycle

### Implementation Details

7. **What's implemented vs. designed-only?**
   - Expected: All 4 layers built, backend 94/94 tests passing, SiYuan + Readest production-ready; Cross-app sync designed but not implemented

8. **How does entity overlay work in Readest?**
   - Expected: Backend `/graph/entities/by-calibre-id/` → trie-based text matching → inline `<span>` highlights → click dispatches event → Flow panel opens

9. **What's the difference between domain graph and personal graph?**
   - Expected: Domain = concepts from books (Neo4j), Personal = ADHD-friendly sparks/insights (adhd_graph_client.py)

### User Experience

10. **How does a user resume a journey across sessions?**
    - Expected: Journey breadcrumbs stored in backend → Dashboard shows recent journeys → click "Resume" → loads FlowSession with visited nodes

11. **What happens when a user highlights text in Readest?**
    - Expected: Text → Quick Capture with book metadata → CaptureItem created → appears in SiYuan queue → user processes later

12. **How does IES reduce cognitive load for ADHD users?**
    - Expected: Multiple entry points (mood, energy, question), visible breadcrumbs, zero-friction capture, energy-aware navigation

---

## Output Format

Provide your analysis as:

### 1. System Summary (500 words)

**Include:**
- Mission and target users
- The three modes and how they interlock
- The virtuous cycle
- Key architectural decisions
- Current implementation status

### 2. Key Strengths (3-5 bullets)

**Example:**
- ✅ ADHD-friendly design validated through real usage (Phase 1)
- ✅ Complete 4-layer architecture with 94/94 tests passing
- ✅ Personalized thinking partnership via 9 question classes
- ✅ Calibre integration provides single source of truth for books
- ✅ Unified design system across SiYuan (Svelte) and Readest (React)

### 3. Critical Gaps (3-5 bullets)

**Example:**
- ⚠️ Cross-app state sync designed but not implemented
- ⚠️ Auto-ingestion only 10/179 books processed
- ⚠️ No frontend tests (SiYuan or Readest)
- ⚠️ Performance not validated at scale (1000+ entities)
- ⚠️ MCP integration deferred to post-v1.0

### 4. Recommended Next Steps (prioritized list)

**Example:**
1. **MVP Completion** (7-11 hours)
   - Fix 3 important backend TODOs
   - Documentation audit
   - Environment variables

2. **Alpha Features** (65-110 hours)
   - Cross-app state sync
   - Auto-ingestion Pass 2 (relationships)
   - Error recovery patterns

3. **User Testing** (2-4 weeks)
   - Daily usage validation
   - Capture 20+ sparks
   - Complete 5+ journeys

4. **Beta Polish** (63-99 hours)
   - Onboarding flow
   - User settings panel
   - Performance optimization

---

## Success Criteria

You've understood IES if you can:

- ✅ Explain the system to a developer in 5 minutes
- ✅ Identify which mode to use for a given task
- ✅ Trace data flow from capture to graph
- ✅ Recognize when code violates IES principles
- ✅ Prioritize features based on virtuous cycle
- ✅ Evaluate whether a question is appropriately classified

---

## Advanced Analysis (Optional)

For deeper understanding:

### Principle Verification

**Review recent code:**
- Does it enable thinking partnership? (not just data storage)
- Is it ADHD-friendly? (low friction, multiple entry points)
- Does it close the virtuous cycle? (enriches future interactions)
- Is it domain-agnostic? (no hardcoded assumptions)

### Architecture Critique

**Evaluate decisions:**
- Why Calibre instead of custom database?
- Why worktrees instead of single workspace?
- Why dual status systems instead of single field?
- Why 9 question classes instead of 8 approaches?

**Reference:**
- `docs/ies-master-analysis/7-meta/7.2-Evolution-Decision-Log.md`

### User Journey Simulation

**Simulate a user:**
1. Starting point: "I want to understand how shame affects executive function"
2. Which mode do they use first?
3. What happens in each step?
4. What does the virtuous cycle look like?
5. What insights might emerge?

---

## References

**Complete Documentation:**
- `docs/ies-master-analysis/` — 28 documents across 7 sections

**Historical Context:**
- `docs/five-agent-synthesis.md` — Why architectural decisions were made
- `docs/session-notes.md` — Phase 1 validation history
- `docs/parking-lot.md` — Deferred features and rationale

**Implementation:**
- `ies/backend/` — Layer 2 FastAPI services
- `.worktrees/siyuan/ies/plugin/` — Layer 3 SiYuan plugin
- `.worktrees/readest/` — Layer 4 Readest integration
- `library/graph/` — Layer 1 graph infrastructure

**Current Status:**
- `docs/STATUS-DASHBOARD.md` — Real-time project health
- `docs/COMPREHENSIVE-PROJECT-STATUS.md` — Complete technical status
- `docs/PRESSURE-TEST-PLAN.md` — Systematic evaluation plan

---

## Validation

After completing this analysis, you should be able to:

1. ✅ Onboard a new developer in <1 hour
2. ✅ Evaluate pull requests against IES principles
3. ✅ Identify implementation gaps
4. ✅ Prioritize features based on virtuous cycle
5. ✅ Explain IES to non-technical stakeholders

**If you can do these, you understand IES.**

---

*This prompt is designed for rapid comprehension. Adjust reading order based on your background (e.g., frontend devs may start with Layer 3/4, backend devs with Layer 1/2).*
```

---

## Usage Examples

### Example 1: New AI Agent Onboarding

**Scenario:** New Claude instance needs to understand IES for debugging

**Prompt:**
```
I need to understand the IES system quickly to help debug an issue with entity overlay.
Use the Complete Picture Generator prompt from docs/ies-master-analysis/7-meta/7.4-Complete-Picture-Generator.md
Focus on Layer 4 (Readest) implementation details.
```

**Expected Outcome:**
- Agent reads Overview, Entity-Graph-Schema, Readest architecture docs
- Understands entity overlay flow: fetch → trie matching → span wrapping → event dispatch
- Identifies relevant code files
- Ready to debug in <20 minutes

### Example 2: External Developer Onboarding

**Scenario:** Open-source contributor wants to add a feature

**Prompt:**
```
New contributor wants to add voice capture feature.
Use Complete Picture Generator to understand:
1. Where voice capture would fit (which mode?)
2. What backend changes needed
3. How to maintain ADHD-friendly design
4. Is this in parking lot?
```

**Expected Outcome:**
- Understands Capture mode design
- Knows voice capture is in parking lot (deferred)
- Sees Quick Capture system they'd extend
- Can write design doc before coding

### Example 3: Code Review Validation

**Scenario:** PR adds new question class to Question Engine

**Prompt:**
```
Review PR #42: Add "Temporal" question class
Use Complete Picture Generator questions:
- Does it fit cognitive model?
- Is it distinct from existing 9 classes?
- Does it have clear cognitive function?
- Are templates provided?
```

**Expected Outcome:**
- Validates against 1-cognition docs
- Checks if "Temporal" overlaps with "Causal"
- Verifies templates exist
- Ensures class hints added to ForgeMode

---

## Maintenance

### Keeping This Prompt Current

**Update triggers:**
- New architectural layer added
- Major feature completion (e.g., MCP integration)
- Significant schema changes
- New modes or question classes added

**Review schedule:**
- After each phase completion
- Before external releases
- When onboarding fails (prompt inadequate)

### Validation

**Test the prompt:**
1. Ask new AI agent to use prompt
2. Time to comprehension
3. Check analysis task outputs
4. Verify can answer all questions
5. Test with real debugging scenario

**Success criteria:**
- <30 minutes to basic understanding
- <45 minutes to implementation details
- Can answer 10/12 questions correctly
- Can identify 3+ strengths and gaps

---

## Appendix: Quick Reference Card

**One-Page IES Cheatsheet:**

```
┌─────────────────────────────────────────────────────────┐
│  IES: Intelligent Exploration System                    │
│  ADHD-Friendly Thinking Partnership Across Any Domain   │
└─────────────────────────────────────────────────────────┘

MISSION: Navigate knowledge non-linearly with AI partner

THREE MODES:
├─ Capture: Zero-friction thought capture (raw → classified → processed)
├─ Dialogue: AI-guided meaning extraction (5 thinking modes)
└─ Flow: Graph exploration with journey tracking

FOUR LAYERS:
├─ Layer 1: Knowledge Graph (Neo4j + Qdrant + Calibre)
├─ Layer 2: Backend APIs (FastAPI, 94/94 tests passing)
├─ Layer 3: SiYuan Plugin (Processing Hub)
└─ Layer 4: Readest (Reading Interface)

9 QUESTION CLASSES:
Schema-Probe • Boundary • Dimensional • Causal
Counterfactual • Anchor • Perspective-Shift
Meta-Cognitive • Reflective-Synthesis

6 COGNITIVE DIMENSIONS:
structure • pace • ambiguity • abstraction
verification • novelty

7 SEED TYPES:
question • insight • observation • moment
schema • contradiction • what_if

TWO STATUS SYSTEMS:
capture_status: raw → classified → processed (AI)
user_status: captured → exploring → anchored (User)

VIRTUOUS CYCLE:
Capture → Dialogue → Concepts → Graph → Flow → Insights → (repeat)

KEY PRINCIPLE: Thinking partnership, not chatbot
```

---

*Use this prompt to rapidly onboard anyone who needs to understand IES.*

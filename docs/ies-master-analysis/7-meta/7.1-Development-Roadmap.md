# 7.1 Development Roadmap

**Purpose:** Realistic implementation roadmap from current state to production-ready system
**Last Updated:** December 6, 2025
**Current Status:** Phase 2c Complete (All 4 layers built, 94/94 tests passing)

---

## Current State Summary

**What's Built:**
- ✅ All 4 architectural layers operational
- ✅ Backend APIs complete (94/94 tests passing)
- ✅ SiYuan Plugin production-ready (remediation complete Dec 5)
- ✅ Readest Integration production-ready (remediation complete Dec 5-6)
- ✅ Knowledge graph with 291 entities, 338 relationships
- ✅ Auto-ingestion daemon processing Calibre library (179 books)

**What's Validated:**
- ✅ Phase 1: Core hypothesis (10 sessions, 11 concepts extracted)
- ✅ Phase 2a: CLI exploration (5 validation sessions)
- ✅ Phase 2b: Visual interfaces (SiYuan + Readest MVPs)
- ✅ Phase 2c: Integration features (Calibre, entity overlay, reframes, templates)

**Outstanding:**
- 3 important backend issues (Calibre path, profile tracking, analytics placeholders)
- 10 medium/low priority bugs (all deferred, Priority 4)
- Documentation review (SYSTEM-DESIGN.md, PROJECT-OVERVIEW.md outdated sections)

---

## MVP (First Real Usage)

**Goal:** System ready for Chris to use daily for personal exploration

### Required Features

- [x] **Entity Overlay** (COMPLETE) — Complexity: **M**
  - Working entity highlighting in Readest
  - Click-to-flow interaction complete
  - Entity type filters functional
  - Status: ✅ COMPLETE (Dec 5)

- [x] **Interactive Questions** (COMPLETE) — Complexity: **M**
  - Questions expandable with response input
  - Cmd+Enter submission working
  - Journey tracking active
  - Status: ✅ COMPLETE (Dec 5)

- [x] **Journey Breadcrumbs** (COMPLETE) — Complexity: **S**
  - Visible in Flow Panel
  - Clickable navigation
  - Dwell time display
  - Status: ✅ COMPLETE (Dec 5)

- [ ] **Environment Variables** — Complexity: **S**
  - Move hardcoded Calibre path to `.env`
  - Estimated: 30 minutes
  - Dependencies: None
  - Status: Tracked in STATUS-DASHBOARD.md

- [ ] **Profile Engagement Tracking** — Complexity: **M**
  - Complete 2 TODOs in profile system
  - Track actual engagement patterns
  - Estimated: 2-3 hours
  - Dependencies: None
  - Status: Tracked in STATUS-DASHBOARD.md

- [ ] **Personal Graph Analytics** — Complexity: **S**
  - Replace placeholder stats with real queries
  - Estimated: 1 hour
  - Dependencies: None
  - Status: Tracked in STATUS-DASHBOARD.md

- [ ] **Documentation Audit** — Complexity: **M**
  - Review SYSTEM-DESIGN.md for outdated sections
  - Update PROJECT-OVERVIEW.md (still says "Phase 1")
  - Review COMPREHENSIVE-PROJECT-STATUS.md (says "65% complete")
  - Estimated: 3-4 hours
  - Dependencies: None

### Optional Enhancements

- [ ] **Design System Polish** — Complexity: **M**
  - Complete IES design system integration in Readest
  - Verify dark theme works consistently
  - Estimated: 4-6 hours
  - Dependencies: None
  - Priority: Low (works well enough)

**MVP Completion Time:** 7-11 hours

---

## Alpha (Internal Testing)

**Goal:** Stable enough for extended personal use (2-4 weeks continuous)

### Features for Broader Testing

- [ ] **Cross-App State Sync** — Complexity: **L**
  - Resume Readest journey in SiYuan
  - Resume SiYuan session in Readest
  - Shared breadcrumb history
  - Estimated: 12-16 hours
  - Dependencies: MVP complete
  - Design doc: Create `docs/plans/cross-app-sync-design.md`

- [ ] **Auto-Ingestion Pass 2** — Complexity: **M**
  - Extract relationships between entities
  - Map entity connections across books
  - Estimated: 8-12 hours
  - Dependencies: Pass 1 complete (10 books)
  - Status: Daemon running, Pass 1 working

- [ ] **Auto-Ingestion Pass 3** — Complexity: **L**
  - LLM enrichment for popular concepts
  - Generate reframes automatically
  - Identify patterns and mechanisms
  - Estimated: 15-20 hours
  - Dependencies: Pass 2 complete

- [ ] **Error Recovery** — Complexity: **M**
  - Graceful degradation when backend down
  - Offline mode for Readest
  - Retry logic for failed API calls
  - Estimated: 6-8 hours
  - Dependencies: MVP complete

- [ ] **Journey Analysis** — Complexity: **L**
  - Identify exploration patterns
  - Surface repeated paths
  - Suggest unexplored connections
  - Estimated: 10-15 hours
  - Dependencies: 30+ journeys captured

### Known Issues to Resolve

- [ ] **BUG-R01: Event Listener Cleanup** — Priority: **3**
  - FoliateViewer memory leak (requires foliate-js refactor)
  - Complexity: **L** (15-20 hours)
  - Workaround: Restart Readest periodically
  - Dependencies: Deep understanding of foliate-js

- [ ] **BUG-R05: Singleton Config Refresh** — Priority: **3**
  - Stale configuration in singleton services
  - Complexity: **M** (4-6 hours)
  - Workaround: Restart services
  - Dependencies: None

- [ ] **Remaining Priority 4 Bugs** — Priority: **4**
  - BUG-R06-R15: Various edge cases
  - Complexity: **S-M** each (1-3 hours each)
  - Total: 12-18 hours
  - Dependencies: User testing to prioritize

**Alpha Completion Time:** 65-110 hours (2-3 weeks)

---

## Beta (Limited External Users)

**Goal:** Polished enough for 2-3 external testers

### Polish and Edge Cases

- [ ] **Onboarding Flow** — Complexity: **M**
  - First-run wizard
  - Profile setup guidance
  - Sample exploration session
  - Estimated: 8-12 hours
  - Dependencies: Alpha stable

- [ ] **User Settings Panel** — Complexity: **M**
  - Readest preferences (font, theme, overlay defaults)
  - SiYuan notebook configuration
  - Backend URL management
  - Estimated: 6-10 hours
  - Dependencies: None
  - Design doc: `docs/plans/2025-12-05-siyuan-settings-panel-design.md`

- [ ] **Performance Optimization** — Complexity: **L**
  - Profile API calls
  - Optimize slow Neo4j queries
  - Add caching layers
  - Estimated: 12-18 hours
  - Dependencies: Real usage data

- [ ] **Accessibility Audit** — Complexity: **M**
  - Keyboard navigation in Flow Panel
  - Screen reader compatibility
  - ADHD-friendly interaction patterns
  - Estimated: 8-12 hours
  - Dependencies: None

### Documentation Needs

- [ ] **User Guide** — Complexity: **L**
  - Getting started guide
  - Mode-by-mode walkthroughs
  - Troubleshooting section
  - Estimated: 15-25 hours
  - Dependencies: Beta features stable

- [ ] **API Documentation** — Complexity: **M**
  - OpenAPI/Swagger for all endpoints
  - Integration examples
  - Schema reference
  - Estimated: 6-10 hours
  - Dependencies: None

- [ ] **Architecture Guide** — Complexity: **M**
  - System overview for developers
  - Data flow diagrams
  - Extension points
  - Estimated: 8-12 hours
  - Dependencies: None

**Beta Completion Time:** 63-99 hours (2-3 weeks)

---

## v1.0 (Production)

**Goal:** Stable, documented, deployable system

### Stability Requirements

- [ ] **Test Coverage** — Complexity: **L**
  - Frontend tests for SiYuan plugin
  - Frontend tests for Readest integration
  - Integration tests for cross-app flows
  - Target: 80% coverage
  - Estimated: 20-30 hours
  - Dependencies: All features complete

- [ ] **Error Monitoring** — Complexity: **M**
  - Sentry integration
  - Error reporting UI
  - Usage analytics (privacy-aware)
  - Estimated: 6-10 hours
  - Dependencies: None

- [ ] **Deployment Automation** — Complexity: **M**
  - Docker Compose for all services
  - One-command setup
  - Backup and restore scripts
  - Estimated: 8-12 hours
  - Dependencies: None

- [ ] **Migration Tools** — Complexity: **M**
  - Data export/import
  - Version migration scripts
  - Backup validation
  - Estimated: 6-10 hours
  - Dependencies: Stable schema

### Performance Requirements

- [ ] **Load Testing** — Complexity: **M**
  - 1000+ entities in graph
  - 100+ concurrent journeys
  - Entity overlay with 200+ entities
  - Estimated: 6-10 hours
  - Dependencies: Test data generation

- [ ] **Query Optimization** — Complexity: **L**
  - Neo4j query profiling
  - Index optimization
  - Caching strategy
  - Estimated: 12-18 hours
  - Dependencies: Load testing results

- [ ] **Frontend Performance** — Complexity: **M**
  - Bundle size optimization
  - Lazy loading for Flow Panel
  - Virtual scrolling for large lists
  - Estimated: 8-12 hours
  - Dependencies: None

**v1.0 Completion Time:** 66-102 hours (2-3 weeks)

---

## Advanced Modules (Post v1.0)

**Goal:** Extend system with features from parking lot

### High-Priority Extensions

#### MCP Server Integration
**From:** `docs/parking-lot.md`

- [ ] **Expose IES as MCP Server** — Complexity: **L**
  - MCP protocol implementation
  - Enable Claude app integration
  - Voice interaction support
  - Estimated: 15-20 hours
  - Dependencies: v1.0 stable
  - Blocker: Requires stable API endpoints

#### n8n Workflow Integration
**From:** `docs/parking-lot.md`

- [ ] **n8n Workflow Nodes** — Complexity: **M**
  - Turn IES into n8n-compatible server
  - Create workflow automation nodes
  - Estimated: 12-15 hours
  - Dependencies: v1.0 stable
  - Blocker: Requires stable API endpoints

#### Advanced Questioning Modes
**From:** `docs/parking-lot.md`

- [ ] **8 Inquiry Approaches** — Complexity: **L**
  - Socratic, Metacognitive, Phenomenological, CBT
  - Solution-focused, Systems, Narrative, Strategic
  - Adapt to user profile
  - Estimated: 20-30 hours
  - Dependencies: Profile system proven
  - Blocker: Working profile system needed

#### Flow Mode Reading Enhancement
**From:** `docs/parking-lot.md`

- [ ] **Advanced Reading Interface** — Complexity: **XL**
  - Non-linear PDF navigation
  - Interactive knowledge graph overlay
  - AI-documented reading paths
  - Estimated: 40-60 hours
  - Dependencies: 30+ concepts developed, patterns identified
  - Blocker: Entity materialization proven

### Medium-Priority Extensions

#### Multi-Domain Framework
**From:** `docs/parking-lot.md`

- [ ] **Generic Configuration System** — Complexity: **XL**
  - Domain-specific implementations
  - Reusable across knowledge domains
  - Estimated: 60+ hours
  - Dependencies: Second real use case exists
  - Blocker: Need second domain validated

#### Advanced Visualization
**From:** `docs/parking-lot.md`

- [ ] **Knowledge Graph Visualization** — Complexity: **XL**
  - Interactive graph visualization
  - Exploration pattern analytics
  - Journey replay
  - Estimated: 50+ hours
  - Dependencies: 50+ sessions completed
  - Blocker: Need real session data

### Low-Priority Extensions

- [ ] **Voice Capture** — Text-to-speech and speech-to-text for Quick Capture
- [ ] **Mobile App** — React Native or Flutter for on-the-go capture
- [ ] **Collaborative Exploration** — Multi-user sessions and shared graphs
- [ ] **Wearable Integration** — ADHD apps, fitness trackers for context
- [ ] **EHR Integration** — Therapy tools, Qualtrics, Redcap

---

## Timeline Summary

| Phase | Duration | Effort | Status |
|-------|----------|--------|--------|
| **MVP** | 1-2 days | 7-11 hours | 85% complete |
| **Alpha** | 2-3 weeks | 65-110 hours | Ready to start |
| **Beta** | 2-3 weeks | 63-99 hours | Deferred |
| **v1.0** | 2-3 weeks | 66-102 hours | Deferred |
| **Advanced** | 3-6 months | 200+ hours | Deferred |

**Total to v1.0:** 201-322 hours (7-10 weeks)

---

## Prioritization Strategy

### Decision Criteria

1. **Does it block daily usage?** → MVP
2. **Does it improve stability?** → Alpha
3. **Does it enable external testers?** → Beta
4. **Does it support production deployment?** → v1.0
5. **Does it extend capabilities?** → Advanced

### Risk Management

**High-Risk Items:**
- Cross-app state sync (complex, many integration points)
- MCP server (external dependency, protocol changes)
- Multi-domain framework (premature generalization risk)

**Low-Risk Items:**
- Environment variables (straightforward config)
- Documentation audit (no code changes)
- User settings panel (isolated feature)

**Deferred Risks:**
- Items from parking lot until proven need exists
- Advanced features until core is validated
- Performance optimization until real bottlenecks identified

---

## Success Metrics

### MVP Success
- ✅ Chris uses system daily for 1 week
- ✅ No crashes or data loss
- ✅ Captures 20+ sparks
- ✅ Completes 5+ journeys

### Alpha Success
- ✅ Chris uses system continuously for 2-4 weeks
- ✅ Extracts 10+ new concepts
- ✅ Cross-app flows work reliably
- ✅ No critical bugs blocking usage

### Beta Success
- ✅ 2-3 external testers onboard successfully
- ✅ Positive feedback on core experience
- ✅ <5 blocking bugs reported
- ✅ Documentation enables self-service setup

### v1.0 Success
- ✅ 80% test coverage
- ✅ One-command deployment
- ✅ Performance targets met (<500ms API responses)
- ✅ 30-day uptime without crashes

---

## Anti-Patterns to Avoid

**From Phase History:**
1. ❌ Building infrastructure before validating core hypothesis
2. ❌ Adding features from parking lot prematurely
3. ❌ Generalizing before second use case exists
4. ❌ Over-engineering configuration systems
5. ❌ Meta-work exceeding actual work

**Safeguards:**
- ✅ Only move items from parking lot when success criteria met
- ✅ Prove feature works before generalizing
- ✅ Ship MVP → validate → iterate
- ✅ Time-box infrastructure work
- ✅ Track meta-work vs. feature work ratio

---

## Next Actions

**Immediate (This Week):**
1. Complete MVP items (7-11 hours)
2. Begin Alpha features (cross-app sync design doc)
3. User testing with complete system

**Near-Term (Next 2 Weeks):**
1. Cross-app state sync implementation
2. Auto-ingestion Pass 2
3. Error recovery patterns

**Medium-Term (Next 1-2 Months):**
1. Beta features and polish
2. Documentation completion
3. External tester onboarding

**Long-Term (3-6 Months):**
1. v1.0 stability and performance
2. Advanced modules as validated needs emerge
3. Second domain validation (if applicable)

---

*This roadmap is a living document. Update as features complete, priorities shift, or new insights emerge from real usage.*

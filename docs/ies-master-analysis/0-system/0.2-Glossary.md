# 0.2 IES Glossary

**Purpose:** This document defines all IES-specific terms with precise meanings verified against the actual codebase implementation.

**Last Updated:** 2025-12-06

---

## Core Entities

### Entity
**Definition:** A node in the knowledge graph representing a distinct concept, person, theory, or other knowledge unit.

**Types:**
- **Domain entities:** concept, framework, theory, mechanism, phenomenon, pattern, distinction, person, book, assessment
- **Personal entities:** spark, insight, thread, favorite_problem

**Location in code:** `library/graph/entities.py`, `library/graph/adhd_ontology.py`

**Neo4j structure:**
```cypher
CREATE (e:Concept {
  name: "Executive Function",
  type: "concept",
  definition: "...",
  sources: ["book_id_1", "book_id_2"]
})
```

---

### Block
**Definition:** A SiYuan note block with associated metadata stored as custom attributes.

**Types (6 formal):**
- **seed**  Atomic idea in /Seedlings/
- **shaping**  Dialogue session segment
- **map**  Visual representation in /Flow_Maps/
- **concept**  Canonical knowledge in /Concepts/
- **decision**  Project decision record
- **log_entry**  Activity record

**Metadata:** Stored in both YAML frontmatter and SiYuan custom attributes for dual compatibility.

**Location in code:** `.worktrees/siyuan/ies/plugin/src/types/blocks.ts`

**Example:**
```typescript
interface SeedBlockMeta {
  block_type: 'seed'
  idea_type: 'question' | 'insight' | 'observation' | 'moment' | 'schema' | 'contradiction' | 'what_if'
  capture_status: 'raw' | 'classified' | 'processed'
  user_status: 'captured' | 'exploring' | 'anchored'
  resonance_signal?: ResonanceSignal
  energy_level?: EnergyLevel
}
```

---

### Seed
**Definition:** An atomic idea captured with minimal structure. The first stage after ephemeral capture.

**Lifecycle:** `captured` ’ `exploring` ’ `anchored`

**Processing:** `raw` (just landed) ’ `classified` (AI added metadata) ’ `processed` (user decided placement)

**Storage:** `/Seedlings/{idea_type}/` folder in SiYuan

**7 Idea Types:**
1. **question**  Open questions or uncertainties
2. **insight**  Raw "aha" moments
3. **observation**  Noticed patterns or facts
4. **moment**  Significant experiences
5. **schema**  Mental model fragments
6. **contradiction**  Conflicting ideas
7. **what_if**  Hypothetical scenarios

**Location in code:** `.worktrees/siyuan/ies/plugin/src/types/blocks.ts` (SeedBlockMeta)

---

### Spark
**Definition:** A personal knowledge entity capturing raw resonance. The ADHD-friendly equivalent of a traditional "note" or "highlight."

**Key Properties:**
- **resonance_signal**  Emotional engagement (curious, excited, surprised, moved, disturbed, unclear, connected, validated)
- **energy_level**  Current state (low, medium, high)
- **capture_context**  What you were doing when you captured it
- **exploration_visits**  How many times you've returned to it

**Lifecycle:** `captured` ’ `exploring` ’ `anchored`

**Storage:** Neo4j personal graph as `spark` node, SiYuan `/Daily/` folder

**Location in code:** `library/graph/adhd_ontology.py`, `library/graph/adhd_graph_client.py`

**Promotion:** Can be promoted to `insight` when validated

**Example:**
```python
{
  "type": "spark",
  "content": "Maybe shame isn't about the behavior, it's about disconnection?",
  "resonance_signal": "curious",
  "energy_level": "medium",
  "status": "exploring",
  "capture_context": "reading Brené Brown while thinking about therapy session"
}
```

---

### Insight
**Definition:** A promoted spark that has been validated and formalized. Represents mature personal knowledge.

**Difference from Spark:**
- **Spark:** Raw, unprocessed emotional resonance
- **Insight:** Validated understanding with clear articulation

**Storage:** Neo4j personal graph as `insight` node, SiYuan `/Insights/` folder

**Location in code:** `library/graph/adhd_ontology.py`

**Dual Insights Architecture:**
- `/Seedlings/Insights/`  Raw "aha" moments (still seeds)
- `/Insights/`  Promoted/validated insights (mature knowledge)

---

## Navigation and Structure

### Notebook (SiYuan context)
**Definition:** A SiYuan workspace container for related documents. Not to be confused with Layer 4 "notebook" in knowledge lifecycle.

**Preferred Notebooks (domain-agnostic):**
- Personal
- Knowledge
- Notes
- Intelligent Exploration System
- (User-configurable via localStorage `ies.preferredNotebooks`)

**Location in code:** `.worktrees/siyuan/ies/plugin/src/utils/siyuan-structure.ts`

---

### Trellis
**Definition:** A SiYuan folder structure for organizing personal knowledge.

**Current Implementation (9-folder merged structure):**
```
/Daily/            Ephemeral captures (Quick Capture destination)
/Seedlings/        Atomic ideas (7 subcategories)
  /Questions/
  /Observations/
  /Moments/
  /Schemas/
  /Contradictions/
  /What_Ifs/
  /Insights/
/Sessions/         Structured thinking (5 mode folders)
  /Learning/
  /Articulating/
  /Planning/
  /Ideating/
  /Reflecting/
/Flow_Maps/        Visual exploration maps
/Concepts/         Canonical knowledge
/Insights/         Promoted/validated insights
/Favorite_Problems/  ADHD anchor questions
/Projects/         Active work (8-page template)
/Archive/          Retired material
```

**Location in code:** `.worktrees/siyuan/ies/plugin/src/utils/siyuan-structure.ts` (STRUCTURE_FOLDERS constant)

---

### Seedling
**Definition:** A document in the `/Seedlings/` folder representing an atomic idea.

**Relationship to Seed:** Seedling is the SiYuan document; Seed is the metadata schema.

**7 Subcategories:** Questions, Observations, Moments, Schemas, Contradictions, What_Ifs, Insights (raw)

**Location in code:** `.worktrees/siyuan/ies/plugin/src/types/blocks.ts` (SEEDLING_FOLDER_MAP)

---

## Modes and Workflows

### Capture Mode
**Definition:** Zero-friction thought capture workflow that doesn't derail current task.

**Components:**
- Quick Capture UI (SiYuan plugin)
- CaptureService (backend)
- `/capture` API endpoints

**Flow:**
```
User captures thought
  ’ CaptureItem created with `queued` status
  ’ AI extracts entities and themes
  ’ Status updates to `in_thinking` during processing
  ’ Status becomes `integrated` when placed
```

**Location in code:**
- Backend: `ies/backend/src/ies_backend/services/capture_service.py`
- Frontend: `.worktrees/siyuan/ies/plugin/src/components/QuickCapture.svelte`

---

### Dialogue Mode
**Definition:** Structured thinking mode with AI-guided questioning based on templates.

**Also known as:** ForgeMode (SiYuan UI component name), AST Mode (Assisted Structured Thinking)

**5 Thinking Modes:**
1. **Learning**  Understand mechanisms (template: `learning-mechanism-map`)
2. **Articulating**  Clarify intuition (template: `articulating-clarify-intuition`)
3. **Planning**  Develop strategy
4. **Ideating**  Generate options
5. **Reflecting**  Process insights

**Templates:** JSON schema with sections, prompts, AI behaviors, graph mapping rules

**Location in code:**
- Backend: `ies/backend/src/ies_backend/api/template.py`
- Frontend: `.worktrees/siyuan/ies/plugin/src/views/ForgeMode.svelte`
- Schemas: `schemas/thinking-template.schema.json`

---

### Flow Mode
**Definition:** Graph exploration mode for non-linear knowledge navigation.

**Two Implementations:**
- **Layer 4 (Readest):** Reading interface with entity overlay, click-to-explore
- **Layer 3 (SiYuan):** Graph exploration without books

**Components:**
- Entity panel showing relationships grouped by type
- Reframes tab with metaphors/analogies
- Thinking partner questions at decision points
- Breadcrumb journey tracking

**Location in code:**
- Readest: `.worktrees/readest/readest/apps/readest-app/src/app/reader/components/flowpanel/`
- SiYuan: `.worktrees/siyuan/ies/plugin/src/views/FlowMode.svelte`
- Backend: `ies/backend/src/ies_backend/services/flow_session_service.py`

---

### AST (Assisted Structured Thinking)
**Definition:** High-structure thinking mode that guides users through templated workflows with precision scaffolding.

**Relationship to other modes:**
- **Discovery Mode:** Schema surfacing
- **Dialogue Mode:** Model building (what ForgeMode implements)
- **Flow Mode:** Associative exploration
- **AST Mode:** Structured thinking assistance (ForgeMode's formal name)

**Implementation:** AST Mode is the canonical specification for ForgeMode templates.

**Location in documentation:** `IES AST SiYuan structure.md`, SiYuan notebook `/Modes/AST Mode`

---

## Personalization

### User Cognition Model
**Definition:** 6-dimension profile that personalizes AI questioning and navigation.

**6 Dimensions (0-1 scale):**
1. **structure_preference**  open exploration ” scaffolded guidance
2. **pace**  slow/deep ” fast/broad
3. **ambiguity_tolerance**  needs closure ” sits with uncertainty
4. **abstraction_level**  concrete ” abstract
5. **verification_need**  intuitive ” evidence-based
6. **novelty_preference**  familiar ” surprising

**Usage:**
- Informs template defaults
- Shapes question class selection
- Drives Mode Transition Engine decisions

**Location in code:** Schema exists in backend, implementation pending full profile tracking

**Documentation:** SiYuan notebook `/Specs/User Cognition Model`

---

### Mode Transition Engine
**Definition:** Automatic mode switching system based on interaction signals.

**3 Signal Streams:**
1. **Interaction cadence**  User response timing
2. **Cognitive load markers**  Stuckness, confidence, clarity
3. **Resonance hits**  Emotional engagement peaks

**Triggers:**
- Discovery ’ Dialogue (when enough anchors collected)
- Dialogue ’ Flow (when model building reaches synthesis)
- Flow ’ AST (when precision scaffolding needed)

**Implementation:** Designed but not fully implemented

**Documentation:** SiYuan notebook `/Modes/Mode Transition Engine`

---

## Backend Services

### Question Engine
**Definition:** AI service that generates context-aware questions based on 9 question classes.

**9 Question Classes:**
1. **Schema-Probe**  Surfaces hidden structure ("What are the main categories?")
2. **Boundary**  Clarifies edges ("Where does this stop being true?")
3. **Dimensional**  Introduces spectra ("What's the range between X and Y?")
4. **Causal**  Pushes for mechanisms ("What makes this happen?")
5. **Counterfactual**  Invites what-if ("If X were different, then...?")
6. **Anchor**  Grounds in concrete ("Can you give a specific example?")
7. **Perspective-Shift**  Forces viewpoint change ("How would X see this?")
8. **Meta-Cognitive**  Checks thinking patterns ("How confident are you?")
9. **Reflective-Synthesis**  Asks for integration ("How does this all fit together?")

**Location in code:**
- Backend: `ies/backend/src/ies_backend/api/question_engine.py`
- Documentation: SiYuan notebook `/Question Engine/Question Classes`

---

### Question Class
**Definition:** A category of inquiry approach mapped to cognitive function.

**Usage in sessions:**
- Tagged in question blocks as SiYuan attributes
- Tracked in `questionClassesUsed` array in session frontmatter
- Allows replay analysis: which inquiry style unlocked movement

**Location in code:** Backend QuestionClass enum, SiYuan session metadata

---

### ForgeMode
**Definition:** SiYuan UI component implementing Dialogue Mode (AST) with template-driven structured thinking.

**Features:**
- Template fetching from `/templates` API
- Section-by-section question-response flow
- Interactive hints with cognitive guidance (QUESTION_CLASS_HINTS)
- Live document preview
- Session save to `/Sessions/{mode}/` folder
- Entity extraction on completion

**Location in code:** `.worktrees/siyuan/ies/plugin/src/views/ForgeMode.svelte`

**Lines:** 1400+ lines implementing complete template workflow

---

### FlowMode
**Definition:** SiYuan UI component for graph exploration without books.

**Features:**
- Entity search and selection
- Relationship display grouped by type
- Reframes tab for concept metaphors
- Breadcrumb journey tracking
- Pre-selected concept navigation from Dashboard

**Location in code:** `.worktrees/siyuan/ies/plugin/src/views/FlowMode.svelte`

---

### Dashboard
**Definition:** SiYuan plugin central hub showing stats, suggestions, recent journeys, and capture queue.

**Key Sections:**
- **Stats**  Entity counts, relationship counts, book processing status
- **Suggestions**  Most connected concepts, novel concepts (low connection but high resonance)
- **Recent Journeys**  Last 5 exploration paths with resumable links
- **Capture Queue**  Unprocessed captures with energy/resonance filtering

**Energy Navigation:**
- Energy filters: All, Low (=), Medium (¡), High (=%)
- Resonance filters: 8 emotional signals with emoji labels

**Location in code:** `.worktrees/siyuan/ies/plugin/src/views/Dashboard.svelte`

---

## Data Structures

### Quick Capture
**Definition:** Low-friction capture system with two-status lifecycle.

**Two Status Systems:**
1. **capture_status** (AI processing): `raw` ’ `classified` ’ `processed`
2. **user_status** (engagement): `captured` ’ `exploring` ’ `anchored`

**AI Boundaries:**
- **Automatic:** Add auto_summary, auto_labels, linked_concepts
- **Interactive (user decides):** Move blocks, split seedlings, attach to projects, mark processed

**Channels:** phone, readest, web, voice, other

**Location in code:** `.worktrees/siyuan/ies/plugin/src/types/blocks.ts` (QuickCaptureMeta interface)

**Documentation:** `docs/IES_SiYuan_Architecture/` (Quick Capture system spec)

---

### Resonance Signal
**Definition:** Emotional engagement tag capturing WHY something matters to you.

**8 Signals:**
- **curious** (>)  Intellectual interest, want to know more
- **excited** (¡)  Energy surge, enthusiasm
- **surprised** (W)  Unexpected connection or insight
- **moved** (=«)  Emotional impact, touched
- **disturbed** ( )  Discomfort, tension, challenge
- **unclear** (S)  Confusion, need for clarification
- **connected** (=)  Links to existing understanding
- **validated** ()  Confirms existing belief

**Purpose:** ADHD-friendly retrieval based on emotional state, not just topic

**Location in code:** `.worktrees/siyuan/ies/plugin/src/types/blocks.ts` (ResonanceSignal enum)

---

### Energy Level
**Definition:** Current cognitive/emotional energy state.

**3 Levels:**
- **low** (=)  Need calming, consolidating content
- **medium** (¡)  Balanced exploration
- **high** (=%)  Ready for challenging, stimulating content

**Purpose:** Navigate by current capacity, not forced engagement

**Location in code:** `.worktrees/siyuan/ies/plugin/src/types/blocks.ts` (EnergyLevel enum)

---

## Backend Services (Technical)

### CaptureService
**Definition:** Backend service managing capture queue lifecycle.

**Methods:**
- `create_capture()`  Creates CaptureItem node with `queued` status
- `list_captures(status)`  Retrieves captures filtered by status
- `update_capture()`  Updates status, entities, topics
- `process_capture()`  Routes to appropriate destination

**Location in code:** `ies/backend/src/ies_backend/services/capture_service.py` (220 lines)

---

### ThinkingService
**Definition:** Backend service managing structured thinking sessions.

**Methods:**
- `start_session()`  Creates ThinkingSession node, updates capture to `in_thinking`
- `record_breadcrumb()`  Tracks angles and insights during session
- `complete_session()`  Marks complete, updates capture to `integrated`

**Location in code:** `ies/backend/src/ies_backend/services/thinking_service.py` (215 lines)

---

### FlowSessionService
**Definition:** Backend service managing Flow Mode exploration lifecycle.

**Methods:**
- `open_from_thinking_session()`  Creates FlowSession from completed thinking
- `record_step()`  Updates breadcrumbs, visited nodes/edges
- `generate_synthesis()`  Uses Claude to synthesize journey insights

**Location in code:** `ies/backend/src/ies_backend/services/flow_session_service.py` (342 lines)

---

## Navigation and Journey

### Journey
**Definition:** Exploration path captured as breadcrumbs with metadata.

**Components:**
- **entry_point**  How exploration started (book, search, dashboard)
- **path**  Array of visited entities with timestamps and dwell times
- **marks**  Saved highlights, annotations, questions

**Storage:** Journey API (`/journeys` endpoints), persisted in Neo4j

**Visualization:** Last 5 steps shown in breadcrumb UI with overflow count

**Location in code:**
- Backend: `ies/backend/src/ies_backend/api/journey.py`
- Frontend: `.worktrees/readest/readest/apps/readest-app/src/app/reader/components/flowpanel/JourneyBreadcrumb.tsx`

---

### Breadcrumb
**Definition:** A single step in a journey path.

**Metadata:**
- **entity_id**  Which entity was visited
- **timestamp**  When
- **dwell_time_seconds**  How long
- **source_passage**  Optional text context

**Purpose:** Make invisible knowledge journeys visible and resumable

---

### Thread
**Definition:** An ongoing exploration path that persists across sessions.

**Difference from Journey:**
- **Journey:** Single session exploration path
- **Thread:** Multi-session exploration theme

**Storage:** Personal graph as `thread` entity

**Purpose:** Track long-term exploration themes for ADHD continuity

**Location in code:** `library/graph/adhd_ontology.py`

---

### Favorite Problem
**Definition:** Feynman-style anchor question that guides exploration.

**Examples:**
- "How do people change?"
- "What creates safety in dialogue?"
- "How can we work with our own patterns?"

**Purpose:** Provides entry points when "where to start?" blocks engagement

**Storage:** Personal graph as `favorite_problem` entity, `/Favorite_Problems/` folder

**Location in code:** `library/graph/adhd_ontology.py`

---

## Technical Terms

### Backend (Layer 2)
**Definition:** FastAPI service layer providing 8 API routers.

**Port:** 8081

**Status:** 94/94 tests passing

**Location:** `ies/backend/src/ies_backend/`

---

### Neo4j
**Definition:** Graph database storing both domain and personal knowledge.

**Current Scale:**
- 291 entities
- 338 relationships
- 10 books indexed (10/179)

**Connection:** Via `neo4j_client.py` and `adhd_graph_client.py`

---

### Qdrant
**Definition:** Vector database for semantic search via embeddings.

**Purpose:** Find conceptually similar entities even with different wording

**Connection:** Via Qdrant client in backend services

---

### Calibre
**Definition:** E-book management system serving as single source of truth for book catalog.

**Library:** 179 books at `/home/chris/Documents/calibre`

**Integration:**
- `calibre_id` as universal book identifier
- CalibreService queries `metadata.db` SQLite
- Books API serves catalog, covers, files

**Location in code:** `ies/backend/src/ies_backend/services/calibre_service.py`

---

### SiYuan
**Definition:** Block-based note-taking application hosting IES plugin (Layer 3).

**Docker Service:** `brain_explore_siyuan` on port 6806

**Plugin Location:** `.worktrees/siyuan/ies/plugin/`

**Workspace:** `./data/siyuan/workspace/`

---

### Readest
**Definition:** Open-source e-book reader (MIT license) integrated as Layer 4.

**Enhancements:**
- Entity overlay transformer
- Flow Panel components
- Calibre library browser
- Journey breadcrumb tracking
- IES design system

**Location:** `.worktrees/readest/readest/`

**Source:** https://github.com/readest/readest

---

## Status and Lifecycle

### Status (capture_status)
**Definition:** AI processing state for Quick Capture items.

**3 States:**
1. **raw**  Just landed, unprocessed
2. **classified**  AI added metadata (entities, themes, suggestions)
3. **processed**  User decided placement

**Purpose:** Separates AI responsibility from user responsibility

---

### User Status
**Definition:** User engagement state for personal knowledge items.

**3 States:**
1. **captured**  Just saved, not explored
2. **exploring**  Actively engaging with
3. **anchored**  Mature, settled understanding

**Purpose:** Non-judgmental growth metaphor instead of productivity metrics

---

## Cross-References

**Related Documents:**
- **0.1 IES Overview**  System mission and architecture
- **0.3 Architecture Diagram**  Visual system reference
- **3.1 Seed Schema**  Detailed seed structure specification
- **1.1 Layer 1 Foundation**  Knowledge graph implementation

---

**Document Version:** 1.0
**Generated:** 2025-12-06
**Source:** Verified against codebase in `/home/chris/dev/projects/codex/brain_explore/`
